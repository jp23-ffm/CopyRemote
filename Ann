if "ANNOTATION" in selected_fields:
    # Remplacer 'ANNOTATION' par les vrais champs annotés
    selected_fields_cleaned = [f for f in selected_fields if f != 'ANNOTATION']
    
    # Ajouter les subqueries
    annotation_notes = ServerAnnotation.objects.filter(
        SERVER_ID=OuterRef('SERVER_ID')
    ).values('notes')[:1]
    
    servers = servers.annotate(
        notes=Subquery(annotation_notes)
    )
    
    # Construire la liste des champs à récupérer
    fields_to_keep = ['SERVER_ID', 'notes'] + selected_fields_cleaned
    servers = servers.values(*fields_to_keep).distinct()
